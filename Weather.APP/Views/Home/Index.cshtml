@{
    ViewData["Title"] = "Home Page";
}

<link href="~/css/c3.min.css" rel="stylesheet" />

<h3 id="city_name"></h3>
<div id="chart"></div>

@section Scripts {

    <script src="~/js/d3-5.8.2.min.js"></script>
    <script src="~/js/c3.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            getData();
        });

        function getData() {
               $.get('@Url.Action("GetData")', function (data) {
                $("#city_name").html(data.city.name);

                var dates = data.list.map(x => x.dt_txt);
                var temp = data.list.map(x => x.main.temp);

                //add date to first position in array
                dates.unshift('date');

                 //add Tempature to first position in array
                temp.unshift('Tempature');

                c3.generate({
                    bindto: '#chart',
                    data: {
                        x: 'date',
                        xFormat: '%Y-%m-%d %H:%M:%S', // how the date is parsed
                        columns: [dates,temp],
                    },
                    axis: {
                        x: {
                            type: 'timeseries',
                            tick: {
                                format: '%d/%m %H:%M'
                            }
                        }
                    }
                });
            });
        }
    </script>
}